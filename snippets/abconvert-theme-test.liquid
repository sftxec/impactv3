<script id="ABConvert-theme-test">
var abconvertThemeTestLiquidVariables = { 
    abconvertThemeId : {{ theme.id }},
    abconvertDesignMode:{{request.design_mode}}
};

Object.keys(abconvertThemeTestLiquidVariables).forEach(function(key) { window[key] =
    abconvertThemeTestLiquidVariables[key]; });
var abconvertThemeTestDict = {"experimentId":"68cbb4c61edc9c9260893cfe","testGroups":[{"name":"Original","percentage":50,"theme":{"id":"174701117768","name":"impactv3/main","screenshotUrl":"https://abconvert-public-image-production.s3.us-east-1.amazonaws.com/391azg-qd.myshopify.com-1755342237825","_id":"68cbb4c61edc9c9260893d00"},"paymentCustomization":[],"deliveryCustomization":[],"checkoutUICustomization":[],"shippingCost":2,"profitMargin":30,"_id":"68cbb4c61edc9c9260893cff","testProducts":[]},{"name":"Variant","percentage":50,"theme":{"id":"176939827528","name":"Copie de impactv3/main","screenshotUrl":"https://abconvert-public-image-production.s3.us-east-1.amazonaws.com/391azg-qd.myshopify.com-1755527368179","_id":"68cbb4c61edc9c9260893d02"},"paymentCustomization":[],"deliveryCustomization":[],"checkoutUICustomization":[],"shippingCost":2,"profitMargin":30,"_id":"68cbb4c61edc9c9260893d01","testProducts":[]}],"themeIdMap":{"174701117768":true,"176939827528":true},"startTime":"2025-09-18T07:29:10.704Z"};
 window.abconvertThemeTestDict = abconvertThemeTestDict;
(()=>{"use strict";const e="https://app.abconvert.io";async function t(){localStorage.getItem("abconvert-country")||await async function(){const t=await fetch(`${e}/api/public/get-country-code`,{method:"GET",mode:"cors"}),n=(await t.json()).countryCode;n&&(console.log("successfully set country code: ",n),localStorage.setItem("abconvert-country",n))}()}function n(){return localStorage.getItem("abconvert-country")}const o=[/Googlebot/,/Googlebot-Image/,/Googlebot-Video/,/Googlebot-News/,/Storebot-Google/,/Google-InspectionTool/,/GoogleOther/,/Google-Extended/,/APIs-Google/,/AdsBot-Google-Mobile/,/AdsBot-Google/,/Mediapartners-Google/,/Google-Safety/,/FeedFetcher-Google/,/GoogleProducer/,/Bingbot/,/Slurp/,/DuckDuckBot/,/Baiduspider/,/YandexBot/,/facebot/,/Twitterbot/,/crawler/,/meta-externalads/,/facebookexternalhit/],r="match_exactly",i="match_regex_exactly",a="contains",c="ends_with",s="starts_with",d="not_match_exactly",l="not_match_regex_exactly",u="not_contains",h="not_ends_with",m="not_starts_with",g="query_string",w=async(e,t,n=null)=>{const o={method:t,mode:"cors",headers:{"Content-Type":"application/json"}};n&&(o.body=JSON.stringify(n));let r=150,i=0;for(;i<3;)try{const t=await fetch(e,o);if(t.ok)return t.json();throw new Error(await t.json())}catch(e){if(r*=2,i+=1,i>=3)throw e;await new Promise((e=>setTimeout(e,r)))}throw new Error("API Error")};function v(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function f(e,t,n){var o,r=new Date;r.setTime(r.getTime()+n),o="; expires="+r.toUTCString(),document.cookie=e+"="+(t||"")+o+"; path=/"}function p(){let e=v("abconvert-landing-page");return e||(e=window.location.pathname,f("abconvert-landing-page",e,18e5)),e}function b(){let e=v("abconvert-session");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),f("abconvert-session",e,18e5)),e}function y(e){const t=(new Date).valueOf(),n=localStorage.getItem("abconvert-first-visit-time")?Number(localStorage.getItem("abconvert-first-visit-time")):t;return localStorage.getItem("abconvert-first-visit-time")||localStorage.setItem("abconvert-first-visit-time",t.toString()),n>(e=new Date(e).valueOf())?"new":"returning"}function x(e){const t=window.location.pathname,n=window.location.search,o=t+n,{conditionType:w,condition:v,value:f}=e;let p;switch(w){case"page_url":p=t;break;case"page_url_with_query_string":p=o;break;case g:p=n;break;default:return!1}if(w===g){let t=function(e,t,n){let o=decodeURI(n);const g=new URLSearchParams(o);switch(e){case r:const e=new URLSearchParams(decodeURI(t));let n=!0;for(let[t,o]of e)if(!g.has(t)||g.get(t)!==o){n=!1;break}return n&&g.forEach(((t,o)=>{e.has(o)||(n=!1)})),n;case i:return new RegExp(t).test(o);case a:const w=new URLSearchParams(t);for(let[e,t]of w)if(!g.has(e)||g.get(e)!==t)return!1;return!0;case s:return o.startsWith(decodeURI(t));case c:return o.endsWith(decodeURI(t));case d:const v=new URLSearchParams(decodeURI(t));let f=!1;for(let[e,t]of v)if(!g.has(e)||g.get(e)!==t){f=!0;break}return f||g.forEach(((e,t)=>{v.has(t)||(f=!0)})),f;case l:return!new RegExp(t).test(o);case u:const p=new URLSearchParams(t);for(let[e,t]of p)if(g.has(e)&&g.get(e)===t)return!1;return!0;case m:return!o.startsWith(decodeURI(t));case h:return!o.endsWith(decodeURI(t));default:return!1}}(v,f,p);return console.log("checkPathCondition",e,t),t}let b=function(e,t,n){let o=decodeURI(n);switch(e){case r:return decodeURI(t)===o;case i:return new RegExp(t).test(o);case a:return o.includes(decodeURI(t));case s:return o.startsWith(decodeURI(t));case c:return o.endsWith(decodeURI(t));case d:return decodeURI(t)!==o;case l:return!new RegExp(t).test(o);case u:return!o.includes(decodeURI(t));case m:return!o.startsWith(decodeURI(t));case h:return!o.endsWith(decodeURI(t));default:return!1}}(v,f,p);return console.log("checkPathCondition",e,b),b}let I,S,T=0,N=0,R=!1;const U=()=>{R?(R=!1,S=(new Date).getTime(),N+=(S-I)/1e3):(R=!0,I=(new Date).getTime())};function k(e,t,n,o,r){const i=(new Date).getTime(),a=window.location.pathname.toString(),c=p();v(`abconvert-${t}-test-stay-time-recorded-${n}`)||(f(`abconvert-${t}-test-stay-time-recorded-${n}`,!0,18e5),setInterval((()=>{(new Date).getTime()-i>39e3&&U()}),39e3),window.addEventListener("beforeunload",(async()=>{const t=b(),s=(new Date).getTime(),d=(s-i)/1e3,l=(s-i)/1e3-T/1e3-N;fetch(e,{method:"POST",body:JSON.stringify({stayingTime:d,stayingTimeAdjusted:l,sessionId:t,experimentId:n,groupIndex:o,visitorType:y(r),pathName:a,landingPage:c}),keepalive:!0})})))}window.addEventListener("scroll",(()=>{T+=1.8,U()}));var O=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((o=o.apply(e,t||[])).next())}))},E=function(e,t){var n,o,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};O(void 0,void 0,void 0,(function(){function r(){var e=new URLSearchParams(location.search),t=e.get("preview"),n=e.get("countryCode");return n&&window.sessionStorage.setItem("abconvert-country",n),t&&!isNaN(Number(t))?(window.sessionStorage.setItem("abconvert-preview-number",t),t):window.sessionStorage.getItem("abconvert-preview-number")}function i(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function a(e){var t,n,o,i,a=(null===(n=null===(t=window.Shopify)||void 0===t?void 0:t.theme)||void 0===n?void 0:n.id)||window.abconvertThemeId,c=e.testGroups,d=e.experimentId,l=e.themeTestConditionType,u=e.themeTestConditions,h=e.startTime,m=(o=c,(i=r())&&!isNaN(Number(i))?Number(i)>=o.length?0:Number(i):function(e){var t,n=function(){var e=localStorage.getItem("abconvert-seed");return null==e&&(e=Math.floor(100*Math.random()).toString(),localStorage.setItem("abconvert-seed",e)),e}(),o=0;for(t=0;t<e.length;++t)if(o+=e[t].percentage,Number(n)<o)return t;return t}(o)),g=!0;if(!e.selectedVistorType||e.selectedVistorType==y(h)){l&&(l===s.EXCLUDE&&(g=!u.some((function(e){return x(e)}))),l===s.INCLUDE&&(g=u.some((function(e){return x(e)})))),g||(m=0),function(){var e=r();return e&&!isNaN(Number(e))}()||!localStorage.getItem("abconvert-theme-test-".concat(d))&&g&&localStorage.setItem("abconvert-theme-test-".concat(d),JSON.stringify({experimentId:d,groupIndex:m,startTime:h}));var w=c[m].theme;if(w.id!=a){window.localStorage.setItem("abconvert-is-redirected-test-theme","true");var v=new URLSearchParams(location.search);v.set("preview_theme_id",w.id.toString()),0!=m&&v.set("pb","0"),location.search=v.toString()}}}function c(){return O(this,void 0,void 0,(function(){var r,c,s,d,l,u,h,m,g;return E(this,(function(v){switch(v.label){case 0:return(()=>{const e=navigator.userAgent;return o.some((t=>t.test(e)))})()?[2]:window.abconvertThemeTestDict?(r=window.abconvertThemeTestDict.themeIdMap,c=new URLSearchParams(location.search).get("preview_theme_id")||"",s=(null===(g=null===(m=window.Shopify)||void 0===m?void 0:m.theme)||void 0===g?void 0:g.id)||window.abconvertThemeId,c&&!r[Number(c)]||s&&!r[s]?[2]:window.abconvertThemeTestDict.isFilteredByCountry?[4,t()]:[3,2]):[3,3];case 1:v.sent(),v.label=2;case 2:if((d=document.createElement("style")).textContent="\n                    #preview-bar-iframe, #PBarNextFrameWrapper {\n                        display: none !important;\n                    }\n                    /* Add more CSS rules here */\n                ",document.head.appendChild(d),window.abconvertThemeTestDict.isFilteredByCountry&&(l=n(),!window.abconvertThemeTestDict.filteredCountries.includes(l)))return[2];if(window.abconvertThemeTestDict.isFilteredByDevice&&(u=function(){const e=navigator.userAgent||window.opera;return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)?"mobile":/ipad|playbook|silk/i.test(e)?"tablet":"desktop"}(),h=window.abconvertThemeTestDict.selectedDevice,u!==h))return[2];a(window.abconvertThemeTestDict),function(o){var r,a,c=(null===(a=null===(r=window.Shopify)||void 0===r?void 0:r.theme)||void 0===a?void 0:a.id)||window.abconvertThemeId,s=o.experimentId,d=o.themeIdMap,l=o.testGroups,u=e+"/api/analytics/theme/originalview",h=e+"/api/analytics/theme/click",m=e+"/api/analytics/theme/bounce",g=e+"/api/analytics/theme/staying-time";if(d[window.abconvertThemeId]&&(!o.selectedVistorType||o.selectedVistorType===y(o.startTime))){var v=localStorage.getItem("abconvert-theme-test-".concat(s)),f=i("abconvert-theme-test-stay-time-recorded-".concat(s));if(v){var x=JSON.parse(v).groupIndex;l[x].theme.id==c&&(function(e){O(this,arguments,void 0,(function(e){var o,r,a,c,s,d,l,u,h,m,g,v,f,p,b,y,x=e.experimentId,I=e.groupIndex;return E(this,(function(e){switch(e.label){case 0:e.trys.push([0,8,,9]),o=0,e.label=1;case 1:return o<10?[4,t()]:[3,7];case 2:return e.sent(),[4,w((null!==(v=null===(g=null===(m=null===window||void 0===window?void 0:window.Shopify)||void 0===m?void 0:m.routes)||void 0===g?void 0:g.root)&&void 0!==v?v:"/")+"cart.js","GET")];case 3:return r=e.sent(),console.log("[LOG] Original cart attributes: ",r.attributes),a=r.attributes,c={},a["abconvert-theme"]&&(c=JSON.parse(a["abconvert-theme"])),c[x]=I,s={"abconvert-theme":JSON.stringify(c),abconvertCountry:n(),abconvertSearchParams:null!==(f=i("abconvert-search-params"))&&void 0!==f?f:""},console.log("[LOG] New cart attributes: ",s),a["abconvert-theme"]&&a["abconvert-theme"]==JSON.stringify(c)?[3,5]:(d={"Content-Type":"application/json"},l=(null!==(y=null===(b=null===(p=null===window||void 0===window?void 0:window.Shopify)||void 0===p?void 0:p.routes)||void 0===b?void 0:b.root)&&void 0!==y?y:"/")+"cart/update.js",u=JSON.stringify({attributes:s}),[4,fetch(l,{method:"POST",headers:d,body:u})]);case 4:return e.sent().ok?console.log("[LOG] Successfully update cart attributes"):console.log("Failed to update cart attributes"),[3,6];case 5:return[3,7];case 6:return o++,[3,1];case 7:return[3,9];case 8:return h=e.sent(),console.log("[ERROR] Update cart attributes: ",h),[3,9];case 9:return[2]}}))}))}({experimentId:s,groupIndex:x}),async function(e,t,n,o){const r=b(),i=window.location.pathname.toString(),a=p();fetch(e,{method:"POST",body:JSON.stringify({sessionId:r,experimentId:t,groupIndex:n,visitorType:y(o),pathName:i,landingPage:a}),keepalive:!0})}(u,s,x,o.startTime),function(e,t,n,o){const r=window.location.pathname.toString(),i=p();window.addEventListener("click",(a=>{if("A"===a.target.tagName){const c=a.target.getAttribute("href");console.log(c);const s=b();fetch(e,{method:"POST",body:JSON.stringify({sessionId:s,experimentId:t,groupIndex:n,link:c,visitorType:y(o),pathName:r,landingPage:i}),keepalive:!0})}}))}(h,s,x,o.startTime),function(e,t,n,o){const r=window.location.pathname.toString(),i=p();let a=!1;window.addEventListener("scroll",(()=>{a=!0})),window.addEventListener("click",(()=>{a=!0})),window.addEventListener("beforeunload",(async()=>{if(!a){const a=b();fetch(e,{method:"POST",body:JSON.stringify({sessionId:a,experimentId:t,groupIndex:n,visitorType:y(o),pathName:r,landingPage:i}),keepalive:!0})}}))}(m,s,x,o.startTime),f||k(g,"theme",s,x,o.startTime))}}}(window.abconvertThemeTestDict),v.label=3;case 3:return[2]}}))}))}var s,d;return E(this,(function(e){s={EXCLUDE:"exclude",INCLUDE:"include"},d=function(){var e;localStorage.getItem("shopURL")||window.Shopify&&window.Shopify.shop&&(e=window.Shopify.shop,localStorage.setItem("shopURL",e),console.log("[LOG] Template test: set shop url"))},console.log("[ABConvert] Running ABConvert Theme test 1.0.0 - hide preview bar + add country filter and device filter");try{if(window.Shopify?.designMode||window.abconvertDesignMode)return[2];localStorage.getItem("abconvert-user-seed")||localStorage.setItem("abconvert-user-seed","0"),d(),p(),document.addEventListener("DOMContentLoaded",d),c()}catch(e){console.log("[ABConvert] Theme test error: ",e.message)}return[2]}))}))})();
</script>