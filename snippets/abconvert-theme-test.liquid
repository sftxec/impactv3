<script id="ABConvert-theme-test">
var abconvertThemeTestLiquidVariables = {
    abconvertThemeId : {{ theme.id }},
    abconvertDesignMode:{{request.design_mode}},
    abconvertApiEndpoint: 'https://app.abconvert.io'
};

Object.keys(abconvertThemeTestLiquidVariables).forEach(function(key) { window[key] =
    abconvertThemeTestLiquidVariables[key]; });
var abconvertThemeTestDict = {"experimentId":"69846a945b6270ee138ddaa3","testGroups":[{"name":"Original","percentage":50,"theme":{"id":"174701117768","name":"impactv3/main","screenshotUrl":"https://storage.googleapis.com/abconvert-v1-prod-screenshots/391azg-qd.myshopify.com-1770285564836.jpg","_id":"69846a945b6270ee138ddaa5"},"paymentCustomization":[],"deliveryCustomization":[],"checkoutUICustomization":[],"shippingCost":2,"profitMargin":30,"_id":"69846a945b6270ee138ddaa4","testProducts":[]},{"name":"Variant","percentage":50,"theme":{"id":"176939827528","name":"Copie de impactv3/main","screenshotUrl":"https://storage.googleapis.com/abconvert-v1-prod-screenshots/391azg-qd.myshopify.com-1770285563137.jpg","_id":"69846a945b6270ee138ddaa7"},"paymentCustomization":[],"deliveryCustomization":[],"checkoutUICustomization":[],"shippingCost":2,"profitMargin":30,"_id":"69846a945b6270ee138ddaa6","testProducts":[]}],"themeIdMap":{"174701117768":true,"176939827528":true},"startTime":"2026-02-05T10:01:56.338Z"};
 window.abconvertThemeTestDict = abconvertThemeTestDict;
(()=>{"use strict";async function e(){localStorage.getItem("abconvert-country")||await async function(){const e=await fetch("https://app.abconvert.io/api/public/get-country-code",{method:"GET",mode:"cors"}),t=(await e.json()).countryCode;t&&(console.log("successfully set country code: ",t),localStorage.setItem("abconvert-country",t))}()}function t(){return localStorage.getItem("abconvert-country")}const n=[/Googlebot/,/Googlebot-Image/,/Googlebot-Video/,/Googlebot-News/,/Storebot-Google/,/Google-InspectionTool/,/GoogleOther/,/Google-Extended/,/APIs-Google/,/AdsBot-Google-Mobile/,/AdsBot-Google/,/Mediapartners-Google/,/Google-Safety/,/FeedFetcher-Google/,/GoogleProducer/,/Bingbot/,/Slurp/,/DuckDuckBot/,/Baiduspider/,/YandexBot/,/facebot/,/Twitterbot/,/crawler/,/meta-externalads/,/facebookexternalhit/],o="url-redirect",r="theme",i="template",a=(e,t)=>"undefined"!=typeof process&&process.env&&process.env[e]?parseFloat(process.env[e]):t,s=(a("SRM_THRESHOLD_PRICE_TEST",.001),a("SRM_THRESHOLD_URL_REDIRECT_TEST",5e-4),a("SRM_THRESHOLD_THEME_TEST",1e-4),"match_exactly"),c="match_regex_exactly",d="contains",l="ends_with",u="starts_with",m="not_match_exactly",p="not_match_regex_exactly",h="not_contains",w="not_ends_with",g="not_starts_with",v="query_string",f=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o={method:t,mode:"cors",headers:{"Content-Type":"application/json"}};n&&(o.body=JSON.stringify(n));let r=150,i=0;for(;i<3;)try{const t=await fetch(e,o);if(t.ok)return t.json();throw new Error(await t.json())}catch(e){if(r*=2,i+=1,i>=3)throw e;await new Promise((e=>setTimeout(e,r)))}throw new Error("API Error")};function b(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function y(e,t,n){var o,r=new Date;r.setTime(r.getTime()+n),o="; expires="+r.toUTCString(),document.cookie=e+"="+(t||"")+o+"; path=/"}function S(e,t,n,a){const s={[o]:"abconvert-url-redirect-experiments",[r]:"abconvert-theme-experiments",[i]:"abconvert-template-experiments"}[e];if(!s)return void console.error("[ABConvert] Invalid experiment type:",e);let c=[];try{const e=b(s);e&&(c=JSON.parse(e))}catch(e){console.warn("[ABConvert] Failed to parse existing cookie:",s,e)}const d={experimentId:t,groupIndex:n,startTime:a},l=c.findIndex((e=>e.experimentId===t));l>=0?c[l]=d:c.push(d),y(s,JSON.stringify(c),2592e6)}function T(){let e=b("abconvert-landing-page");return e||(e=window.location.pathname,y("abconvert-landing-page",e,18e5)),e}function I(){let e=b("abconvert-session");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),y("abconvert-session",e,18e5)),e}function x(e){const t=(new Date).valueOf(),n=localStorage.getItem("abconvert-first-visit-time")?Number(localStorage.getItem("abconvert-first-visit-time")):t;return localStorage.getItem("abconvert-first-visit-time")||localStorage.setItem("abconvert-first-visit-time",t.toString()),n>(e=new Date(e).valueOf())?"new":"returning"}function R(e){const t=window.location.pathname,n=window.location.search,o=t+n,{conditionType:r,condition:i,value:a}=e;let f;switch(r){case"page_url":f=t;break;case"page_url_with_query_string":f=o;break;case v:f=n;break;default:return!1}return r===v?function(e,t,n){let o=decodeURI(n);const r=new URLSearchParams(o);switch(e){case s:const e=new URLSearchParams(decodeURI(t));let n=!0;for(let[t,o]of e)if(!r.has(t)||r.get(t)!==o){n=!1;break}return n&&r.forEach(((t,o)=>{e.has(o)||(n=!1)})),n;case c:return new RegExp(t).test(o);case d:const i=new URLSearchParams(t);for(let[e,t]of i)if(!r.has(e)||r.get(e)!==t)return!1;return!0;case u:return o.startsWith(decodeURI(t));case l:return o.endsWith(decodeURI(t));case m:const a=new URLSearchParams(decodeURI(t));let v=!1;for(let[e,t]of a)if(!r.has(e)||r.get(e)!==t){v=!0;break}return v||r.forEach(((e,t)=>{a.has(t)||(v=!0)})),v;case p:return!new RegExp(t).test(o);case h:const f=new URLSearchParams(t);for(let[e,t]of f)if(r.has(e)&&r.get(e)===t)return!1;return!0;case g:return!o.startsWith(decodeURI(t));case w:return!o.endsWith(decodeURI(t));default:return!1}}(i,a,f):function(e,t,n){let o=decodeURI(n);switch(e){case s:return decodeURI(t)===o;case c:return new RegExp(t).test(o);case d:return o.includes(decodeURI(t));case u:return o.startsWith(decodeURI(t));case l:return o.endsWith(decodeURI(t));case m:return decodeURI(t)!==o;case p:return!new RegExp(t).test(o);case h:return!o.includes(decodeURI(t));case g:return!o.startsWith(decodeURI(t));case w:return!o.endsWith(decodeURI(t));default:return!1}}(i,a,f)}let N,_,E=0,O=0,C=!1;const D=()=>{C?(C=!1,_=(new Date).getTime(),O+=(_-N)/1e3):(C=!0,N=(new Date).getTime())};function k(e,t,n,o,r){const i=(new Date).getTime(),a=window.location.pathname.toString(),s=T();b(`abconvert-${t}-test-stay-time-recorded-${n}`)||(y(`abconvert-${t}-test-stay-time-recorded-${n}`,!0,18e5),setInterval((()=>{(new Date).getTime()-i>39e3&&D()}),39e3),window.addEventListener("beforeunload",(async()=>{const t=I(),c=(new Date).getTime(),d=(c-i)/1e3,l=(c-i)/1e3-E/1e3-O;fetch(e,{method:"POST",body:JSON.stringify({stayingTime:d,stayingTimeAdjusted:l,sessionId:t,experimentId:n,groupIndex:o,visitorType:x(r),pathName:a,landingPage:s}),keepalive:!0})})))}window.addEventListener("scroll",(()=>{E+=1.8,D()}));const U="ABConvert";var A=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};!function(){if(window.ABCONVERT_SENTRY_INITIALIZED)return;if(!window.ABCONVERT_SENTRY_DSN)return void console.warn("[ABConvert] ABCONVERT_SENTRY_DSN not configured");const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/@sentry/browser@8/build/bundle.min.js",e.async=!0,e.crossOrigin="anonymous",e.onload=()=>{window.Sentry.init({dsn:window.ABCONVERT_SENTRY_DSN,environment:window.ABCONVERT_ENVIRONMENT||"customer-store",tracesSampleRate:.1,replaysSessionSampleRate:0,replaysOnErrorSampleRate:0,beforeSend:e=>(e.tags=e.tags||{},e.tags.shop_domain=window.Shopify?.shop||"unknown",e.tags.script_version=window.ABCONVERT_SCRIPT_VERSION,e.request&&delete e.request.headers,e)}),window.ABCONVERT_SENTRY_INITIALIZED=!0},e.onerror=()=>{console.error("[ABConvert] Failed to load Sentry SDK from CDN")},document.head.appendChild(e)}();const P=window.abconvertApiEndpoint||"https://app.abconvert.io";A(void 0,void 0,void 0,(function*(){const o=function(e){const t={source:U,script:e};function n(n,o){const{step:r,message:i,data:a,error:s}=o,c={...t,level:n,step:r,message:i,timestamp:(new Date).toISOString()};void 0!==a&&(c.data=a);const d=function(e){if(e)return e instanceof Error?{message:e.message,stack:e.stack}:"object"==typeof e?e:{value:e}}(s);d&&(c.error=d);const l=function(e){return"error"===e?"error":"warn"===e?"warn":"debug"===e&&"function"==typeof console.debug?"debug":"log"}(n),u=`[${U}] [${e}] [${n.toUpperCase()}]${r?` [${r}]`:""} ${i}`;console[l](u,c)}return{info(e){n("info",e)},warn(e){n("warn",e)},error(e){n("error",e),window.Sentry&&e.error&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.Sentry?window.Sentry.captureException(e,{tags:{script:t.script||"unknown",step:t.step||"unknown"},extra:t.data||{}}):console.error("[ABConvert] Sentry not initialized, cannot report error:",e)}(e.error,{script:t.script,step:e.step,data:e.data})},debug(e){n("debug",e)}}}("theme-test");function r(){const e=new URLSearchParams(location.search),t=e.get("preview"),n=e.get("countryCode");return n&&window.sessionStorage.setItem("abconvert-country",n),t&&!isNaN(Number(t))?(window.sessionStorage.setItem("abconvert-preview-number",t),t):window.sessionStorage.getItem("abconvert-preview-number")}function i(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}const a=()=>{let e;localStorage.getItem("shopURL")||window.Shopify&&window.Shopify.shop&&(e=window.Shopify.shop,localStorage.setItem("shopURL",e),o.info({step:"shop-url",message:"Stored shop URL for theme test",data:{shopURL:e}}))};function s(e){var t,n;const o=(null===(n=null===(t=window.Shopify)||void 0===t?void 0:t.theme)||void 0===n?void 0:n.id)||window.abconvertThemeId,{testGroups:i,experimentId:a,themeTestConditionType:s,themeTestConditions:c,startTime:d,redirectControlGroup:l}=e;let u=function(e){let t,n=r();return t=n&&!isNaN(Number(n))?Number(n)>=e.length?0:Number(n):function(e){const t=function(){let e=localStorage.getItem("abconvert-seed");return null==e&&(e=Math.floor(100*Math.random()).toString(),localStorage.setItem("abconvert-seed",e)),e}();let n,o=0;for(n=0;n<e.length;++n)if(o+=e[n].percentage,Number(t)<o)return n;return n}(e),t}(i),m=!0;if(e.selectedVistorType&&e.selectedVistorType!=x(d))return;s&&("exclude"===s&&(m=!c.some((e=>R(e)))),"include"===s&&(m=c.some((e=>R(e))))),m||(u=0),function(){const e=r();return e&&!isNaN(Number(e))}()||!localStorage.getItem(`abconvert-theme-test-${a}`)&&m&&(localStorage.setItem(`abconvert-theme-test-${a}`,JSON.stringify({experimentId:a,groupIndex:u,startTime:d})),S("theme",a,u,Number(d)));const p=i[u].theme,h=new URLSearchParams(location.search);if(h.has("_abr"))return;if(navigator.sendBeacon){const e=I(),t=JSON.stringify({sessionId:e,experimentId:a,groupIndex:u,visitorType:x(d),pathName:window.location.pathname,landingPage:T(),preRedirect:!0}),n=new Blob([t],{type:"application/json"});navigator.sendBeacon(P+"/api/analytics/theme/originalview",n)}if(window.localStorage.setItem("abconvert-is-redirected-test-theme","true"),p.id!=o)h.set("preview_theme_id",p.id.toString()),h.set("pb","0"),h.set("_abr","1");else{if(!l||0!==u)return;h.set("preview_theme_id",p.id.toString()),h.set("pb","0"),h.set("_abr","1")}const w=window.location.pathname+"?"+h.toString()+window.location.hash;window.location.replace(w)}o.info({step:"init",message:"Running ABConvert Theme test 1.0.0 - hide preview bar + add country filter and device filter"});try{if(window.Shopify?.designMode||window.abconvertDesignMode)return;localStorage.getItem("abconvert-user-seed")||localStorage.setItem("abconvert-user-seed","0"),a(),T(),document.addEventListener("DOMContentLoaded",a),function(){A(this,void 0,void 0,(function*(){var r,a;if(!(()=>{const e=navigator.userAgent;return n.some((t=>t.test(e)))})()&&window.abconvertThemeTestDict){const{themeIdMap:n}=window.abconvertThemeTestDict,c=new URLSearchParams(location.search).get("preview_theme_id")||"",d=(null===(a=null===(r=window.Shopify)||void 0===r?void 0:r.theme)||void 0===a?void 0:a.id)||window.abconvertThemeId;if(c&&!n[Number(c)])return;if(d&&!n[d])return;window.abconvertThemeTestDict.isFilteredByCountry&&(yield e());const l=document.createElement("style"),u="\n                    #preview-bar-iframe, #PBarNextFrameWrapper {\n                        display: none !important;\n                    }\n                    /* Add more CSS rules here */\n                ";if(l.textContent=u,document.head.appendChild(l),window.abconvertThemeTestDict.isFilteredByCountry){const e=t();if(!window.abconvertThemeTestDict.filteredCountries.includes(e))return}if(window.abconvertThemeTestDict.isFilteredByDevice&&function(){const e=navigator.userAgent||window.opera;return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)?"mobile":/ipad|playbook|silk/i.test(e)?"tablet":"desktop"}()!==window.abconvertThemeTestDict.selectedDevice)return;s(window.abconvertThemeTestDict),function(n){var r,a;const s=(null===(a=null===(r=window.Shopify)||void 0===r?void 0:r.theme)||void 0===a?void 0:a.id)||window.abconvertThemeId,{experimentId:c,themeIdMap:d,testGroups:l}=n,u=P+"/api/analytics/theme/originalview",m=P+"/api/analytics/theme/click",p=P+"/api/analytics/theme/bounce",h=P+"/api/analytics/theme/staying-time",w=localStorage.getItem(`abconvert-theme-test-${c}`);if(d[window.abconvertThemeId]&&(!n.selectedVistorType||n.selectedVistorType===x(n.startTime))){const r=i(`abconvert-theme-test-stay-time-recorded-${c}`);if(w){const{groupIndex:a}=JSON.parse(w);l[a].theme.id==s&&(function(n){A(this,arguments,void 0,(function*({experimentId:n,groupIndex:r}){var a,s,c,d,l,u,m;try{for(let p=0;p<10;p++){yield e();const p=yield f((null!==(c=null===(s=null===(a=null===window||void 0===window?void 0:window.Shopify)||void 0===a?void 0:a.routes)||void 0===s?void 0:s.root)&&void 0!==c?c:"/")+"cart.js","GET");o.debug({step:"cart-attributes",message:"Fetched original cart attributes",data:{attributes:p.attributes}});let h=p.attributes,w={};h["abconvert-theme"]&&(w=JSON.parse(h["abconvert-theme"])),w[n]=r;const g={"abconvert-theme":JSON.stringify(w),abconvertCountry:t(),abconvertSearchParams:null!==(d=i("abconvert-search-params"))&&void 0!==d?d:""};if(o.debug({step:"cart-attributes",message:"Prepared theme test cart attributes payload",data:g}),h["abconvert-theme"]&&h["abconvert-theme"]==JSON.stringify(w))break;{const e={"Content-Type":"application/json"},t=(null!==(m=null===(u=null===(l=null===window||void 0===window?void 0:window.Shopify)||void 0===l?void 0:l.routes)||void 0===u?void 0:u.root)&&void 0!==m?m:"/")+"cart/update.js",n=JSON.stringify({attributes:g});let r=yield fetch(t,{method:"POST",headers:e,body:n});r.ok?o.info({step:"cart-attributes",message:"Theme test cart attributes updated successfully"}):o.warn({step:"cart-attributes",message:"Failed to update theme test cart attributes",data:{status:r.status}})}}}catch(e){o.error({step:"cart-attributes",message:"Error while updating theme test cart attributes",error:e})}}))}({experimentId:c,groupIndex:a}),async function(e,t,n,o){const r=I(),i=window.location.pathname.toString(),a=T();fetch(e,{method:"POST",body:JSON.stringify({sessionId:r,experimentId:t,groupIndex:n,visitorType:x(o),pathName:i,landingPage:a}),keepalive:!0})}(u,c,a,n.startTime),function(e,t,n,o){const r=window.location.pathname.toString(),i=T();window.addEventListener("click",(a=>{if("A"===a.target.tagName){const s=a.target.getAttribute("href"),c=I();fetch(e,{method:"POST",body:JSON.stringify({sessionId:c,experimentId:t,groupIndex:n,link:s,visitorType:x(o),pathName:r,landingPage:i}),keepalive:!0})}}))}(m,c,a,n.startTime),function(e,t,n,o){const r=window.location.pathname.toString(),i=T();let a=!1;window.addEventListener("scroll",(()=>{a=!0})),window.addEventListener("click",(()=>{a=!0})),window.addEventListener("beforeunload",(async()=>{if(!a){const a=I();fetch(e,{method:"POST",body:JSON.stringify({sessionId:a,experimentId:t,groupIndex:n,visitorType:x(o),pathName:r,landingPage:i}),keepalive:!0})}}))}(p,c,a,n.startTime),r||k(h,"theme",c,a,n.startTime))}}}(window.abconvertThemeTestDict)}}))}()}catch(e){o.error({step:"init",message:"Failed to initialize Theme test",error:e})}}))})();
</script>